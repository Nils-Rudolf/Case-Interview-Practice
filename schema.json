{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "additionalProperties": false,
  "required": ["cases"],
  "properties": {
    "cases": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "id", "title", "language", "scenario",
          "instructions", "clarifying", "solution"
        ],
        "properties": {
          "id": { "type": "string", "pattern": "^[a-z0-9]+(?:-[a-z0-9]+)*$" },
          "title": { "type": "string", "minLength": 3, "maxLength": 120 },
          "language": { "type": "string", "enum": ["de", "en"] },
          "scenario": { "type": "string", "minLength": 100 },
          "instructions": { "type": "string", "minLength": 10 },
          "clarifying": {
            "type": "object",
            "additionalProperties": false,
            "required": ["maxQuestions", "questions"],
            "properties": {
              "maxQuestions": { "type": "integer", "minimum": 1 },
              "questions": {
                "type": "array",
                "minItems": 2,
                "items": {
                  "type": "object",
                  "additionalProperties": false,
                  "required": ["id", "question", "answer", "isCorrect"],
                  "properties": {
                    "id": { "type": "string", "pattern": "^q[0-9]+$" },
                    "question": { "type": "string", "minLength": 5 },
                    "answer": { "type": "string", "minLength": 2 },
                    "isCorrect": { "type": "boolean" }
                  }
                }
              }
            }
          },
          "solution": {
            "type": "object",
            "additionalProperties": false,
            "required": ["tree", "explanation", "pitfalls"],
            "properties": {
              "solutionTitle": { "type": "string", "minLength": 1, "maxLength": 80 },
              "tree": {
                "type": "array",
                "minItems": 3,
                "maxItems": 6,
                "items": { "$ref": "#/definitions/treeNode" }
              },
              "explanation": { "type": "string", "minLength": 50 },
              "pitfalls": {
                "type": "array",
                "minItems": 3,
                "maxItems": 10,
                "items": { "type": "string", "minLength": 2 }
              }
            }
          }
        }
      }
    }
  },
  "definitions": {
    "treeNode": {
      "type": "object",
      "additionalProperties": false,
      "required": ["label"],
      "properties": {
        "label": { "type": "string", "minLength": 2 },
        "children": {
          "type": "array",
          "items": { "$ref": "#/definitions/treeNode" }
        }
      }
    }
  }
}
